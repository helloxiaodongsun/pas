<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
<title></title>
<script th:src="@{/js/jquery-1.9.1.js}"></script>
<link th:href="@{/css/bootstrap.min14ed.css}" rel="stylesheet"></link>
<link th:href="@{/css/font-awesome.min93e3.css}" rel="stylesheet"></link>
<link th:href="@{/css/animate.min.css}" rel="stylesheet"></link>
<link th:href="@{/css/style.min862f.css}" rel="stylesheet"></link>
<link th:href="@{/css/plugins/bootstrap-table/bootstrap-table.min.css}" rel="stylesheet"></link>
<link th:href="@{/css/plugins/ztree/metro.css}" rel="stylesheet"></link>
<link th:href="@{/css/plugins/sidemenu/BootSideMenu.css}" rel="stylesheet" ></link>
<link th:href="@{/css/table-fix.css}" rel="stylesheet"></link>
<script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/layer/layer.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/pace/pace.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/jquery.form.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/validate/jquery.validate.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/validate/messages_zh.min.js}" type="text/javascript" ></script>
<script th:src="@{/js/plugins/bootstrap-table/bootstrap-table.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/ztree/jquery.ztree.all-3.5.min.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/layer/laydate/laydate.js}" type="text/javascript"></script>
<script th:src="@{/js/plugins/sidemenu/BootSideMenu.js}" type="text/javascript"></script>
<script th:src="@{/js/jquery.serializejson.js}" type="text/javascript"></script>
<script th:src="@{/js/jsUtil.js}"></script>
<script th:src="@{/js/script/system/orgTree.js}"></script>
<!-- <script type="text/javascript">
function getCookie(name)
{
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); //正则匹配
    if(arr=document.cookie.match(reg)){
      return unescape(arr[2]);
    }
    else{
     return null;
    }
} 

var zTree;
var setting = {
    view: {
        dblClickExpand: false,
        showLine: true,
        selectedMulti: false
    },
    data: {
        simpleData: {
            enable:true,
            idKey: "code",
            pIdKey: "parentCode",
            rootPId: ""
        },
        key:{
        	url:""
        }
    },
    callback: {
        beforeClick: function(treeId, o) {
        	if(o.children == undefined ){
				$("#btn_del").show();
			}else{
				$("#btn_del").hide();
			}
			$("#btn_edit").show();
			getMenuById(o.id);
			id = o.id;
			code = o.code;
			name = o.name;
			parentCode = o.parentCode;
			menuType = o.menuType;
			url = o.url;
        }
    }
};

var id = "";
var code = "";
var name = "";
var parentCode = "";
var parentName = "";
var menuType = "";
var url = "";
var sort = "";
$(function () {
	$("#menutree").height(document.body.clientHeight - 68);
	$("#menucontent").height(document.body.clientHeight - 85);
	menutree();
});
//获取菜单树
function menutree(){
	var token = getCookie("TOKEN");
	 $.ajax({
		url : portal.bp() + '/api/menus',
		dataType:'json',
		headers:{
			'Authorization': 'Bearer ' + token
		},
		type:'get',
		success : function(d) {
			 $.fn.zTree.init($("#menutree"), setting, d.data);
			 var zTree = $.fn.zTree.getZTreeObj("menutree");
			 zTree.expandAll(true); 
		}
	});
}
function getMenuById(id){
	var token = getCookie("TOKEN");
	$.ajax({
		url : portal.bp() + '/api/menus/'+id,
		headers:{
			'Authorization': 'Bearer ' + token
		},
		type:'get',
		dataType:'json',
		success : function(d) {
			var data = d.data;
			$("#menucode").val(data.code);
			$("#menuname").val(data.name);
			$("#menutype").val(data.menuType);
			$("#url").val(data.url);
			$("#num").val(data.sort);
			sort = data.sort;
			parentName = data.parentName;
		}
	});
}
</script> -->
</head><body>
<!-- <body class="gray-bg">
        	<div class="ibox-content " >
        		<h4>菜单树</h4>
        		<ul id="menutree" class="ztree" style="overflow: auto;"></ul>
            </div>
<div id="menuTreeDiv" style="display: none;">
	<ul id="selectMenutree" class="ztree" style="overflow: auto;"></ul>
</div>
</body> -->
<!-- <body class="gray-bg">
    <div class="row wrapper wrapper-content animated fadeInRight">
        <div class="col-sm-4 " style="padding-right: 5px;">
        	<div class="ibox-content " >
        		<h4>菜单树</h4>
        		<ul id="menutree" class="ztree" style="overflow: auto;"></ul>
            </div>
        </div>
      
       <div class="col-sm-8 " style="padding-left: 0px;">
        	<div class="ibox-content" style="height: 70px;">
	          
	       <div class="row">
			<div class="col-sm-12">  
	          <div class="ibox float-e-margins">
				<div class="ibox-title" >
                    <div style="float: left;color: black;">查询条件</div>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up" style="color: black;"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <form id="formSearch" class="form-horizontal">
				    	<div class="form-group" >
				      		<label class="control-label col-sm-1" for="txt_search_departmentname">机构编号</label>
				      		<div class="col-sm-2">
				       			<input type="text" class="form-control" id="innerOrgId"/>
				      		</div>
				      		<label class="control-label col-sm-1" for="txt_search_statu">机构名称</label>
				      		<div class="col-sm-2">
				       			<input type="text" class="form-control" id="name"/>
				      		</div> -->
<!-- 				      		<label class="control-label col-sm-1" for="txt_search_statu">上级机构</label>
				      		<div class="col-sm-2">
				       			<input type="text" class="form-control" id="parentId" style="display:none"/>
				      		</div> -->
				      		<!-- <div class="col-sm-1">
                    			<button onclick="query();" type="button" class="btn btn-primary btn-sm" ><span class="glyphicon glyphicon-search" aria-hidden="true"></span> 查询</button>
				      		</div>
				     	</div>
				     </form>
                </div>
           </div>  
	        </div>      
	          </div>    
	            	
            </div>    
            <div class="ibox-content " style="margin-top: 2px;" id="menucontent">
            	<div class="row">
		<div class="col-sm-12 ">
			<div class="ibox float-e-margins">
				<div class="ibox-title" >
                    <div style="float: left;margin-top: -5px;margin-left: -15px;">
	     				<button id="btn_add" shiro:hasPermission="/user/toadd" onclick="add();" type="button" class="btn btn-sm btn-link" ><span class="glyphicon glyphicon-plus" aria-hidden="true"> </span> <b>添加</b></button>
	     				<button id="btn_edit" shiro:hasPermission="/user/toedit" onclick="edit();" type="button" class="btn  btn-sm btn-link" ><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> <b>修改</b></button>
	     				<button id="btn_add" onclick="add();" type="button" class="btn btn-sm btn-link"  ><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> <b>新增</b></button>
	     				<button id="btn_edit" onclick="edit();" type="button" class="btn btn-sm btn-link" ><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> <b>编辑</b></button>
	     				<button id="btn_del" onclick="del();" type="button" class="btn btn-sm btn-link" ><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <b>删除</b></button>
	     				<button id="btn_del" shiro:hasPermission="/user/delete" onclick="del();" type="button" class="btn btn-sm btn-link" ><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <b>删除</b></button>
					</div>
                </div>
				<div class="ibox-content">
	            	<table id="usertable" data-mobile-responsive="true"></table>
	            </div>
            </div>
		</div>
	</div>
            </div>
        </div>
    </div> -->

<div id="menuTreeDiv" style="display: none;">
	<ul id="selectMenutree" class="ztree" style="overflow: auto;"></ul>
</div>
</body>
</html>